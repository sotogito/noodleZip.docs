### /mypage/my
- isOwner - true
- useId
#### /mypage/{userId}
- isOwner - false
- userId

----
가게 저장으로 넘어가는 url은 다음과 같은 조건문으로 한다
```
if(isOwner) {
	/mypage/my/saved-store;
} else {
	/mypage/{userId}/saved-store;
}
```

그럼 이 둘을 독립적으로 처리하는 컨트롤러가 있다.
1. /mypage/my/saved-store
	- 카테고리 : 모든 카테고리 목록을 보여준다
	- 저장 가게 : 모든 카테고리의 모든 가게 목록을 보여준다.
	- 카테고리 수정 : isOwner가 ture로 수정 form을 보여준다.

2. /mypage/{userId}/saved-store
	- 카테고리 : 비공계인 카테고리 목록은 보여주지 않는다.
	- 저장 가게 : 비공계인 카테고리의 가게 목록은 보여주지 않는다.
	- 카테고리 수정 : isOwner가 false로 수정 form은 보여주지 않는다.


---
### 의문
#### 의문 1
카테고리 이름 수정과 삭제의 경우에는 본인이 본인의 저장가게 페이지에 들어가야만 보여주는 버튼이다.  
그래서 그 수정을 했을때 비동기로 처리를 한다고 가졍했을때 컨트롤러에성 지금 요청한 사용자와 요청이 들어온 저장가게카테고리아이디가 맞는지 한번 더 확인해봐야하나?
```
➡ **결론:**
- ✅ 무조건 서버에서 검증해야 함.
- 프론트에서 isOwner 조건으로 UI만 숨겨도, 누군가 Postman 등으로 직접 API를 호출하면 수정/삭제 가능하므로,
- 서버에서 `category.user.id == 로그인 유저 id` 체크 반드시 필요.
```

#### 의문2
어디까지 비동기 처리는 /my와 /{userId}를 나눌 필요가 있는가?  
예를들어 저장가게 페이지에서 카테고리 필터조회를 할때 비동기로 처리한다고 가정했을 때, {userId}로 조회를 해도 어차피 드 저장가게 화면에는 본인, 혹은 타인의 저장가게 페이지에 알맞게 ㅋ타ㅔ고리 목록이 뿌려져있기 때문에  
/my와 /{userId}를 분리해야하는지 의문이 생긴다.  
의문 1과 비슷한 맥락의 질문인거같다.

```
➡ **결론:*
- ✅ API는 통합하고, `isOwner`로 분기 처리하는 게 유지보수 + 재사용성 좋음.
- 즉 `/mypage/{userId}/saved-store/list` 한 API에서
    `boolean isOwner = loginUserId.equals(userId);`
    를 통해 서버에서 공개/비공개 포함 범위만 다르게 조회.
```


#### 의문3
비동기 처리는 어디까지 해야하나 일단 비동기 처리가 확정이 될만한 기능은 다음과 같다.  
1. 지도보기를 클릭했을 때 선택된 카테고리 storeId, saveStoreId, 위도, 경도 받아오기
2. 지도에 뿌려진 화살표를 클릭했을 때 모달로 가게 정보 띄우기  
근데 비동기로 해야ㅕ할지 의문이 드는 기능들은
 3. 페이지네이션 페이지 이동할때
4. 카테고리 선택하고 해당 저장가게 조회할때 -> 비동기
5. 카테고리 이름, 공개여부 수정 및 삭제할때 -. 수정/삭제 자체는 AJAX, 성공하면 비동기
```
➡ **결론:**
- ✅ 반드시 비동기:
    - 지도보기, 마커 클릭 시 모달, 카테고리 선택에 따른 저장 가게 조회
- ✅ 비동기 권장:
    - 페이지네이션 (UX滑, 새로고침 안 하도록)
- ✅ 수정/삭제도 비동기로 처리 후, 부분적으로 카테고리/저장가게 목록만 다시 불러와서 갱신하면 UX 훨씬 좋아짐.
```