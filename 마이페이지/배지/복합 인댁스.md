```
-- UserBadge í…Œì´ë¸”
CREATE INDEX idx_user_badge_optimal ON user_badge(user_id, badge_id);

-- Badge í…Œì´ë¸”  
CREATE INDEX idx_badge_optimal ON badge(id, badge_category_id, badge_level DESC);
```

ë³µí•©í‚¤ ë³µí•© í…Œì´ë¸”


UNIQUE (user_id, badge_id)

| í…Œì´ë¸”          | ìœ ë‹ˆí¬ ì¡°í•© ì¶”ì²œ                                        | ì´ìœ                  |
| ------------ | ------------------------------------------------ | ------------------ |
| `user_badge` | `(user_id, badge_id)`                            | ìœ ì €ë³„ ë°°ì§€ ë‹¨ì¼ ë³´ìœ  ë³´ì¥    |
| `badge`      | `(badge_category_id, badge_level)`, ì§€ì—­ ,ë¼ë©˜ ì¹´í…Œê³ ë¦¬ë„ | ë ˆë²¨ë³„ ë°°ì§€ ëª…í™•í•œ êµ¬ë¶„ ë° ê´€ë¦¬ |


|êµ¬ë¶„|ì„¤ëª…|ëª©ì |
|---|---|---|
|ğŸ”¸ **UNIQUE ì œì•½ì¡°ê±´**|íŠ¹ì • ì»¬ëŸ¼ ë˜ëŠ” ì»¬ëŸ¼ ì¡°í•©ì´ **ì¤‘ë³µë˜ì§€ ì•Šë„ë¡** ì œí•œ|ì¤‘ë³µ ë°©ì§€ (ë°ì´í„° ë¬´ê²°ì„± í™•ë³´)|
|ğŸ”¸ **ë³µí•© PK (Composite Primary Key)**|**ë‘ ê°œ ì´ìƒì˜ ì»¬ëŸ¼ì„ í•©ì³ì„œ PK**ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ|í…Œì´ë¸”ì˜ **ì‹ë³„ì** (JOIN, ì™¸ë˜í‚¤ ê´€ê³„ ë“±)|ã…–
@Entity
@Table(name = "user_badge", indexes = {
    @Index(name = "idx_user_badge_category", columnList = "user_id, badge_category_id")
})
public class UserBadge {
    ...
}

| í•­ëª©      | ë³µí•©í‚¤ (Composite PK)               | ë³µí•© ì¸ë±ìŠ¤ (Composite Index)            |
| ------- | -------------------------------- | ----------------------------------- |
| ëª©ì       | **í–‰(row)ì˜ ìœ ì¼ì„± ë³´ì¥**               | **ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ**                        |
| ì œì•½      | ë°˜ë“œì‹œ ìœ ì¼í•´ì•¼ í•¨                       | ìœ ì¼í•  í•„ìš” ì—†ìŒ                           |
| ë°ì´í„° ë¬´ê²°ì„± | ë³´ì¥í•¨                              | ë³´ì¥ ì•ˆ í•¨                              |
| ìë™ ì¸ë±ìŠ¤  | ê¸°ë³¸í‚¤ì´ë¯€ë¡œ ì¸ë±ìŠ¤ ìë™ ìƒì„±                 | ëª…ì‹œì  ë˜ëŠ” `@Index` í•„ìš”                  |
| ì˜ˆì‹œ      | `PRIMARY KEY(user_id, badge_id)` | `INDEX(user_id, badge_category_id)` |